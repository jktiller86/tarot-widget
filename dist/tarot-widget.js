var TarotCardWidget=function(e,t,r,o,d){const a="https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124b1a11a779600fb94_Cover.jpg",b=[{number:1,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbcdf8/6837a123832438a378bbcdf8_01.jpg"},{number:2,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1234d1200b08de1c01f_02.jpg"},{number:3,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123b1a11a779600fa88_03.jpg"},{number:4,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1234dc40f413a7af36d_04.jpg"},{number:5,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1236162caf82d36eb95_05.jpg"},{number:6,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1236bc543b6e36ace9f_06.jpg"},{number:7,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1234dc40f413a7af371_07.jpg"},{number:8,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123a3e295a38760f1c8_08.jpg"},{number:9,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a12366615a6d9df7f7f8_09.jpg"},{number:10,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a12385654504f913473b_10.jpg"},{number:11,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1233bfe284ebd489faf_11.jpg"},{number:12,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a12327c38ba1f2678d26_12.jpg"},{number:13,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123936359963d0588f1_13.jpg"},{number:14,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123a38bc135fdca926b_14.jpg"},{number:15,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123a47a74cd5b88126b_15.jpg"},{number:16,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1240a1d5c1664c1737e_16.jpg"},{number:17,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123ccb2139df0446b49_17.jpg"},{number:18,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1240a1d5c1664c17392_18.jpg"},{number:19,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123d6be3ee12d063e5e_19.jpg"},{number:20,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124a45d9392ce70797a_20.jpg"},{number:21,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a123ff082011cf44220b_21.jpg"},{number:22,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124ead8cf6533c45891_22.jpg"},{number:23,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124d3cbc65f78bbf26f_23.jpg"},{number:24,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124a38bc135fdca92b7_24.jpg"},{number:25,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124a3e295a38760f2e5_25.jpg"},{number:26,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a1240bcfe07db2bed686_26.jpg"},{number:27,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124ff082011cf44225f_27.jpg"},{number:28,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124cfa86f7c422ffeed_28.jpg"},{number:29,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124a38bc135fdca9326_29.jpg"},{number:30,url:"https://cdn.prod.website-files.com/68379778f107ba359adbbfe8/6837a124c6d9eb99f2692c64_30.jpg"}],n=e=>{let{subscribeEndpoint:r}=e;const[n,i]=o.useState(null),[s,f]=o.useState("idle"),[c,l]=o.useState("idle"),u="flip"===s||"form"===s,p=()=>{if("idle"===s||"form"===s){const e=b[Math.floor(Math.random()*b.length)];i(e),f("shuffle"),l("idle")}};return o.useEffect(()=>{if("shuffle"===s){const e=setTimeout(()=>f("flip"),2e3);return()=>clearTimeout(e)}},[s]),o.useEffect(()=>{if("flip"===s){const e=setTimeout(()=>f("form"),800);return()=>clearTimeout(e)}},[s]),t.jsxs("div",{style:{maxWidth:600,margin:"0 auto",textAlign:"center"},children:[t.jsx("p",{style:{color:"#666",marginBottom:20},children:"Click the deck to draw your card"}),t.jsx("div",{onClick:p,style:{cursor:"pointer",perspective:1e3,marginBottom:20},children:t.jsx("div",{style:{position:"relative",width:280,height:420,margin:"0 auto"},children:[0,1,2].map((e,r)=>{const o=0===r&&u&&n?n.url:a;return t.jsxs(d.motion.div,{animate:"shuffle"===s?{x:[0,-30,40,-20,30,0],y:[0,-20,-10,-15,-5,0],rotate:[0,-5,3,-2,4,0]}:{rotateY:u?180:0},transition:{duration:"shuffle"===s?2:.8,ease:"easeInOut",delay:"shuffle"===s?.1*r:0},style:{position:"absolute",width:"100%",height:"100%",transformStyle:"preserve-3d",zIndex:3-r},children:[t.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",borderRadius:12,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",background:"url("+a+") center/cover no-repeat"}}),t.jsx("div",{style:{position:"absolute",width:"100%",height:"100%",backfaceVisibility:"hidden",transform:"rotateY(180deg)",borderRadius:12,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",background:"url("+o+") center/cover no-repeat"}})]},r)})})}),"form"===s&&t.jsxs("form",{onSubmit:function(e){try{if(e.preventDefault(),!n)return Promise.resolve();const t=e.target,o=t.elements.namedItem("name").value,d=t.elements.namedItem("email").value;l("loading");const a=function(e,t){try{var a=Promise.resolve(fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,email:d,cardNumber:n.number})})).then(function(e){return Promise.resolve(e.json()).then(function(t){e.ok&&t.success?l("success"):(console.error(t),l("error"))})})}catch(e){return t(e)}return a&&a.then?a.then(void 0,t):a}(0,function(e){console.error(e),l("error")});return Promise.resolve(a&&a.then?a.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},style:{background:"#f5f5f5",padding:20,borderRadius:12,marginTop:20,textAlign:"left",maxWidth:280,margin:"20px auto"},children:[t.jsx("input",{name:"name",type:"text",placeholder:"Your Name",required:!0,style:{width:"100%",padding:10,fontSize:16,borderRadius:6,border:"1px solid #ddd",marginBottom:12}}),t.jsx("input",{name:"email",type:"email",placeholder:"Your Email",required:!0,style:{width:"100%",padding:10,fontSize:16,borderRadius:6,border:"1px solid #ddd",marginBottom:12}}),t.jsx("button",{type:"submit",style:{width:"100%",background:"#333",color:"#fff",padding:12,fontSize:16,border:"none",borderRadius:6,cursor:"pointer"},children:"Get My Reading"})]}),"loading"===c&&t.jsx("p",{children:"Sending…"}),"success"===c&&t.jsx("p",{style:{color:"green"},children:"✅ Check your email soon!"}),"error"===c&&t.jsx("p",{style:{color:"red"},children:"❌ Something went wrong."}),"form"===s&&t.jsx("button",{onClick:p,style:{marginTop:16,background:"#333",color:"#fff",padding:"12px 30px",fontSize:16,border:"none",borderRadius:6,cursor:"pointer"},children:"Draw Another Card"})]})};function i(e){const o=document.querySelector(e.root);o?r.createRoot(o).render(t.jsx(n,{subscribeEndpoint:e.subscribeEndpoint})):console.warn("[TarotCardWidget] root element not found:",e.root)}return window.TarotCardWidget={init:i},e.init=i,e}({},jsxRuntime,client,react,framerMotion);
